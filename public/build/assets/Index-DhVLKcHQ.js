import{d as te,p as b,n as ae,c as le,C as R,r as x,a as v,o as c,q as p,e as r,w as d,u as o,m as se,b as a,f as oe,t as s,g as h,P as ne,s as S,F as re,l as ie,M as de,W as ue}from"./app-C9NPN8YL.js";import{A as ce}from"./AdminLayout-DLyqpZI_.js";import{V as M,D as me}from"./dataTables.dataTables-DzMoOcqn.js";import{_ as ve}from"./useFlashMessages-DxL5MwKF.js";import"./ShoppingOutlined-Bm8hxjj4.js";import"./LanguageSwitcher.vue_vue_type_script_setup_true_lang-cHfJrG5p.js";import"./FilterOutlined-de12o04R.js";const pe={key:0,class:"loading-overlay"},ge={class:"bg-white rounded-lg responsive-table p-4 shadow-md"},_e={class:"mb-4 flex items-center justify-between"},fe={class:"text-lg font-semibold mb-4"},be={class:"mb-4"},ye={class:"block"},he={key:0,class:"text-red-500"},we={class:"mb-4"},xe={class:"block"},ke={key:0,class:"text-red-500"},Ce={class:"mb-4"},Ie={class:"block"},Ue={key:0,class:"text-red-500"},Le={key:1,class:"mt-2"},$e={class:"text-sm text-gray-600 mb-1"},Ne=["src"],Ae={class:"text-right"},Ee={class:"mb-4"},De={class:"block"},Re={key:0,class:"text-red-500"},Se={class:"mb-4"},Pe={class:"block"},je={key:0,class:"text-red-500"},Me={class:"mb-4"},Be={class:"block"},Fe={key:0,class:"mb-2"},Te={class:"text-sm text-gray-500 mb-1"},Ve=["src"],qe={class:"text-xs text-gray-500 mt-1"},Oe={key:1,class:"text-red-500"},ze={class:"mt-2 text-sm text-gray-500"},Ye={key:2,class:"mt-2"},We={class:"text-sm text-gray-600 mb-1"},Ge=["src"],He={class:"text-right"},Je={class:"text-md"},Ke={class:"mb-4"},Qe={class:"block"},Xe={key:0,class:"text-red-500"},Ze={class:"mb-4"},et={class:"block"},tt={key:0,class:"text-red-500"},at={class:"mb-4"},lt={class:"block"},st={key:0,class:"text-red-500"},ot={key:1,class:"mt-2"},nt={class:"text-sm text-gray-600 mb-1"},rt=["src"],it={class:"text-right"},dt={class:"flex justify-center p-4"},ut=["src"],ct=te({__name:"Index",props:{categories:{}},setup(mt){M.use(me);const y=b(!1),B=l=>l?ie(l).format("DD-MM-YYYY hh:mm A"):"N/A",F=ae(),t=le(()=>{var l;return((l=F.props.translations)==null?void 0:l.dashboard_all_pages)||{}}),m=R({name:"",description:"",id:null,image:null}),i=R({id:null,name:"",description:"",image:null,_method:"PUT"}),u=R({id:null,name:"",description:"",category_id:null,image:null}),k=b(!1),P=b(""),U=b(""),f=b(""),L=b(""),$=b(!1),j=b(""),T=[{title:t.value.sr||"Sr.",data:null,render:(l,e,_,g)=>g.row+1},{title:t.value.image||"Image",data:"image",orderable:!1,render:l=>l?`<img src="/storage/${l}" class="w-12 h-12 object-cover rounded mb-1 cursor-pointer" style="display:inline-block;" />`:'<span class="text-gray-400 mb-1">No Image</span>'},{title:t.value.name||"Name",data:"name"},{title:t.value.description||"Description",data:"description",render:l=>l??"N/A"},{title:t.value.created_at||"Created At",data:"created_at",render:l=>B(l)},{title:t.value.action||"Action",data:null,orderable:!1,render:(l,e,_)=>`
        <button class="edit-btn p-2" data-id="${_.id}" title="${t.value.edit||"Edit"}">
            <i class="fa fa-pencil-square-o text-green-500"></i>
        </button>
        <button class="delete-btn p-2" data-id="${_.id}" title="${t.value.delete||"Delete"}">
            <i class="fa fa-trash text-red-500"></i>
        </button>
        <button class="brand-btn p-2" data-id="${_.id}" title="${t.value.add_brand||"Add Brand"}">
            <i class="fa fa-creative-commons"></i>
        </button>
        <button class="related-brand-btn p-2" data-id="${_.slug}" title="${t.value.brand_list||"Brand List"}">
            <i class="fa fa-list text-slate-800"></i>
        </button>
    `}],V={paging:!0,searching:!0,ordering:!0,responsive:!0,pageLength:10,createdRow:(l,e)=>{setTimeout(()=>{var _,g,N,A,w;(_=l.querySelector(".edit-btn"))==null||_.addEventListener("click",()=>H(e)),(g=l.querySelector(".delete-btn"))==null||g.addEventListener("click",()=>G(e.id)),(N=l.querySelector(".brand-btn"))==null||N.addEventListener("click",()=>J(e)),(A=l.querySelector(".related-brand-btn "))==null||A.addEventListener("click",()=>K(e)),(w=l.querySelector("img"))==null||w.addEventListener("click",()=>{e.image&&ee(e.image)})},0)}},q=()=>{m.reset(),f.value="",k.value=!0},O=l=>{const e=l.target;e.files&&e.files[0]&&(m.image=e.files[0],f.value=URL.createObjectURL(e.files[0]))},z=l=>{const e=l.target;e.files&&e.files[0]&&(u.image=e.files[0],f.value=URL.createObjectURL(e.files[0]))},Y=l=>{const e=l.target;e.files&&e.files[0]&&(i.image=e.files[0],L.value=URL.createObjectURL(e.files[0]))},W=()=>{y.value=!0,m.post(route("admin.category.store"),{onSuccess:()=>{m.reset(),k.value=!1},onFinish:()=>{y.value=!1}})},G=l=>{de.confirm({title:t.value.confirm_delete_title||"Are you sure you want to delete",content:t.value.confirm_delete_content_category||"Deleting this category will also remove all associated brands. This action is irreversible. Are you sure you want to proceed?",okText:t.value.confirm_delete_ok||"Yes, Delete",okType:"danger",cancelText:t.value.confirm_delete_cancel||"Cancel",onOk(){y.value=!0,m.delete(route("admin.category.delete",{id:l}),{onFinish:()=>{y.value=!1}})}})},C=b(!1),I=b(!1),H=l=>{i.id=l.id,i.name=l.name,i.description=l.description,i.image=null,U.value=l.image,L.value="",C.value=!0},J=l=>{P.value=l.name,u.category_id=l.id,I.value=!0},K=l=>{ue.get(route("admin.related-brand-list",l.slug))},Q=()=>{y.value=!0,u.post(route("admin.brand.store"),{onSuccess:()=>{u.reset(),I.value=!1,f.value&&(URL.revokeObjectURL(f.value),f.value="")},onFinish:()=>{y.value=!1}})},X=()=>{y.value=!0,i.post(route("admin.category.update",{id:i.id}),{onSuccess:()=>{C.value=!1},onFinish:()=>{y.value=!1}})},Z=l=>{if(!l)return"";const e=l.split("/");return e[e.length-1]},ee=l=>{j.value="/storage/"+l,$.value=!0};return(l,e)=>{const _=x("a-spin"),g=x("a-button"),N=x("a-col"),A=x("a-row"),w=x("a-input"),D=x("a-textarea"),E=x("a-modal");return c(),v(re,null,[y.value?(c(),v("div",pe,[r(_,{size:"large"})])):p("",!0),r(ce,null,{default:d(()=>[r(o(se),{title:t.value.category_title||"Category List"},null,8,["title"]),r(A,null,{default:d(()=>[r(N,{xs:24},{default:d(()=>{var n;return[a("div",ge,[a("div",_e,[a("h2",fe,s(t.value.category_title||"Category List"),1),a("div",null,[r(g,{onClick:e[0]||(e[0]=vt=>q()),type:"default"},{default:d(()=>[h(s(t.value.add_category||"Add Category"),1)]),_:1}),r(o(ne),{href:l.route("admin.category.log")},{default:d(()=>[r(g,{type:"default"},{default:d(()=>[h(s(t.value.category_logs||"Category Logs"),1)]),_:1})]),_:1},8,["href"])])]),(n=l.categories)!=null&&n.data?(c(),oe(o(M),{key:0,data:l.categories.data,columns:T,options:V,class:"display"},{default:d(()=>[a("thead",null,[a("tr",null,[a("th",null,s(t.value.sr||"Sr."),1),a("th",null,s(t.value.image||"Image"),1),a("th",null,s(t.value.name||"Name"),1),a("th",null,s(t.value.description||"Description"),1),a("th",null,s(t.value.created_at||"Created At"),1),a("th",null,s(t.value.action||"Action"),1)])]),e[22]||(e[22]=a("tbody",null,null,-1))]),_:1},8,["data"])):p("",!0)])]}),_:1})]),_:1}),r(E,{open:k.value,"onUpdate:open":e[5]||(e[5]=n=>k.value=n),title:t.value.add_category||"Add Category",onCancel:e[6]||(e[6]=n=>k.value=!1),footer:null},{default:d(()=>[a("form",{onSubmit:e[4]||(e[4]=S(n=>W(),["prevent"])),enctype:"multipart/form-data"},[a("div",be,[a("label",ye,s(t.value.name||"Name"),1),r(w,{value:o(m).name,"onUpdate:value":e[1]||(e[1]=n=>o(m).name=n),class:"mt-2 w-full",placeholder:t.value.name_placeholder||"Enter Name"},null,8,["value","placeholder"]),o(m).errors.name?(c(),v("div",he,s(o(m).errors.name),1)):p("",!0)]),a("div",we,[a("label",xe,s(t.value.description||"Description"),1),r(D,{value:o(m).description,"onUpdate:value":e[2]||(e[2]=n=>o(m).description=n),class:"mt-2 w-full",placeholder:t.value.eneter_description||"Enter Description","auto-size":{minRows:2,maxRows:5}},null,8,["value","placeholder"]),o(m).errors.description?(c(),v("div",ke,s(o(m).errors.description),1)):p("",!0)]),a("div",Ce,[a("label",Ie,s(t.value.image||"Image"),1),a("input",{type:"file",onChange:O,accept:"image/*",class:"mt-2 w-full p-2 border rounded"},null,32),o(m).errors.image?(c(),v("div",Ue,s(o(m).errors.image),1)):p("",!0),f.value?(c(),v("div",Le,[a("p",$e,s(t.value.preview||"Preview")+":",1),a("img",{src:f.value,alt:"Image Preview",class:"w-24 h-24 object-cover rounded border"},null,8,Ne)])):p("",!0)]),a("div",Ae,[r(g,{type:"default",onClick:e[3]||(e[3]=n=>k.value=!1)},{default:d(()=>[h(s(t.value.cancel||"Cancel"),1)]),_:1}),r(g,{type:"primary","html-type":"submit",class:"ml-2"},{default:d(()=>[h(s(t.value.add||"Add"),1)]),_:1})])],32)]),_:1},8,["open","title"]),r(E,{open:C.value,"onUpdate:open":e[11]||(e[11]=n=>C.value=n),title:t.value.update||"Edit Category",onCancel:e[12]||(e[12]=n=>C.value=!1),footer:null},{default:d(()=>[a("form",{onSubmit:e[10]||(e[10]=S(n=>X(),["prevent"])),enctype:"multipart/form-data"},[a("div",Ee,[a("label",De,s(t.value.name||"Name"),1),r(w,{value:o(i).name,"onUpdate:value":e[7]||(e[7]=n=>o(i).name=n),class:"mt-2 w-full",placeholder:t.value.name_placeholder||"Enter Name"},null,8,["value","placeholder"]),o(i).errors.name?(c(),v("div",Re,s(o(i).errors.name),1)):p("",!0)]),a("div",Se,[a("label",Pe,s(t.value.description||"Description"),1),r(D,{value:o(i).description,"onUpdate:value":e[8]||(e[8]=n=>o(i).description=n),class:"mt-2 w-full",placeholder:t.value.eneter_description||"Enter Description","auto-size":{minRows:2,maxRows:5}},null,8,["value","placeholder"]),o(i).errors.description?(c(),v("div",je,s(o(i).errors.description),1)):p("",!0)]),a("div",Me,[a("label",Be,s(t.value.image||"Image"),1),U.value?(c(),v("div",Fe,[a("p",Te,s(t.value.current_image||"Current Image"),1),a("img",{src:"/storage/"+U.value,alt:"Current Category Image",class:"w-24 h-24 object-cover rounded border"},null,8,Ve),a("p",qe,s(Z(U.value)),1)])):p("",!0),a("input",{type:"file",onChange:Y,accept:"image/*",class:"mt-2 w-full p-2 border rounded"},null,32),o(i).errors.image?(c(),v("div",Oe,s(o(i).errors.image),1)):p("",!0),a("div",ze,s(t.value.keep_current_image||"Leave empty to keep the current image"),1),L.value?(c(),v("div",Ye,[a("p",We,s(t.value.new_image_preview||"New Image Preview")+":",1),a("img",{src:L.value,alt:"New Image Preview",class:"w-24 h-24 object-cover rounded border"},null,8,Ge)])):p("",!0)]),a("div",He,[r(g,{type:"default",onClick:e[9]||(e[9]=n=>C.value=!1)},{default:d(()=>[h(s(t.value.cancel||"Cancel"),1)]),_:1}),r(g,{type:"primary","html-type":"submit",class:"ml-2"},{default:d(()=>[h(s(t.value.update||"Update"),1)]),_:1})])],32)]),_:1},8,["open","title"]),r(E,{open:I.value,"onUpdate:open":e[18]||(e[18]=n=>I.value=n),title:t.value.add_brand||"Add Brand",onCancel:e[19]||(e[19]=n=>I.value=!1),footer:null},{default:d(()=>[a("h4",Je,s(t.value.category||"Category")+" ("+s(P.value)+")",1),a("form",{onSubmit:e[17]||(e[17]=S(n=>Q(),["prevent"])),enctype:"multipart/form-data"},[r(w,{hidden:"",value:o(u).category_id,"onUpdate:value":e[13]||(e[13]=n=>o(u).category_id=n),class:"mt-2 w-full",placeholder:t.value.name_placeholder||"Enter Name"},null,8,["value","placeholder"]),a("div",Ke,[a("label",Qe,s(t.value.name||"Name"),1),r(w,{value:o(u).name,"onUpdate:value":e[14]||(e[14]=n=>o(u).name=n),class:"mt-2 w-full",placeholder:t.value.name_placeholder||"Enter Name"},null,8,["value","placeholder"]),o(u).errors.name?(c(),v("div",Xe,s(o(u).errors.name),1)):p("",!0)]),a("div",Ze,[a("label",et,s(t.value.description||"Description"),1),r(D,{value:o(u).description,"onUpdate:value":e[15]||(e[15]=n=>o(u).description=n),class:"mt-2 w-full",placeholder:t.value.eneter_description||"Enter Description","auto-size":{minRows:2,maxRows:5}},null,8,["value","placeholder"]),o(u).errors.description?(c(),v("div",tt,s(o(u).errors.description),1)):p("",!0)]),a("div",at,[a("label",lt,s(t.value.image||"Image"),1),a("input",{type:"file",onChange:z,accept:"image/*",class:"mt-2 w-full p-2 border rounded"},null,32),o(u).errors.image?(c(),v("div",st,s(o(u).errors.image),1)):p("",!0),f.value?(c(),v("div",ot,[a("p",nt,s(t.value.preview||"Preview")+":",1),a("img",{src:f.value,alt:"Image Preview",class:"w-24 h-24 object-cover rounded border"},null,8,rt)])):p("",!0)]),a("div",it,[r(g,{type:"default",onClick:e[16]||(e[16]=n=>I.value=!1)},{default:d(()=>[h(s(t.value.cancel||"Cancel"),1)]),_:1}),r(g,{type:"primary","html-type":"submit",class:"ml-2"},{default:d(()=>[h(s(t.value.save||"Save"),1)]),_:1})])],32)]),_:1},8,["open","title"]),r(E,{open:$.value,"onUpdate:open":e[20]||(e[20]=n=>$.value=n),title:t.value.preview||"Image Preview",onCancel:e[21]||(e[21]=n=>$.value=!1),footer:null,width:"600px"},{default:d(()=>[a("div",dt,[a("img",{src:j.value,alt:"Full Size Image",class:"max-w-full max-h-[500px] object-cover"},null,8,ut)])]),_:1},8,["open","title"])]),_:1})],64)}}}),wt=ve(ct,[["__scopeId","data-v-ae277667"]]);export{wt as default};
