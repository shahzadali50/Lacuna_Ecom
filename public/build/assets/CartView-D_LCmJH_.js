import{_ as C}from"./UserLayout.vue_vue_type_script_setup_true_lang-Bb-4El3K.js";import{d as S,n as w,p as y,c as g,r as R,f as q,o as l,w as n,e as o,b as s,u,m as F,R as B,S as N,a as p,F as V,q as $,t as i,g as x,K as j,W as h}from"./app-CeOsqZGY.js";import"./LanguageSwitcher.vue_vue_type_script_setup_true_lang-CWQ3Fi78.js";import"./Label.vue_vue_type_script_setup_true_lang-BWHQHN1q.js";import"./Button.vue_vue_type_script_setup_true_lang-3XOTFG4b.js";import"./createLucideIcon-CsmaoPwf.js";const D={class:"mt-16"},E={class:"container mx-auto px-2 sm:px-4"},z={class:"p-6 rounded-lg"},K={key:0,class:"text-center py-8"},P={key:1,class:"space-y-4"},T=["src","alt"],W={class:"flex-1"},L={class:"flex justify-between items-start"},O={class:"font-medium text-lg"},Q={class:"flex items-center gap-2 mt-2"},U={class:"text-gray-600"},X={class:"flex justify-between items-start mt-2"},Y={class:"text-primary font-medium mt-2"},ee=S({__name:"CartView",setup(A){const b=w(),m=y(!1),c=y(new Set),d=g(()=>(b.props.cart||[]).map(e=>({...e,quantity:e.qty||0,isRemoving:c.value.has(e.id)})));g(()=>d.value.reduce((a,e)=>a+e.total_price,0));const _=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PKR",minimumFractionDigits:2}).format(a),v=(a,e)=>{h.post(route("cart.add"),{id:a,qty:1,action:e},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{},onError:r=>{console.error("Cart update failed",r)}})},k=a=>{c.value.has(a)||(c.value.add(a),m.value=!0,h.post(route("cart.remove"),{id:a},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{},onError:e=>{console.error("Remove failed",e)},onFinish:()=>{m.value=!1,c.value.delete(a)}}))};return(a,e)=>{const r=R("a-button");return l(),q(C,null,{default:n(()=>[o(u(F),{title:"checkout"}),s("section",D,[s("div",E,[o(u(B),null,{default:n(()=>[o(u(N),{span:10},{default:n(()=>[s("div",z,[e[3]||(e[3]=s("h1",{class:"text-2xl font-bold mb-6"},null,-1)),!d.value||d.value.length===0?(l(),p("div",K,e[0]||(e[0]=[s("p",{class:"text-gray-500"},"Your cart is empty",-1)]))):(l(),p("div",P,[(l(!0),p(V,null,$(d.value,t=>(l(),p("div",{key:t.id,class:"flex items-start gap-4 border-b pb-4"},[s("img",{src:"/storage/"+t.thumnail_img,alt:t.name,class:"w-24 h-24 object-cover rounded"},null,8,T),s("div",W,[s("div",L,[s("h3",O,i(t.name),1)]),s("div",Q,[o(r,{size:"small",onClick:f=>v(t.id,"decrease"),disabled:t.quantity<=1},{default:n(()=>e[1]||(e[1]=[x("-")])),_:2},1032,["onClick","disabled"]),s("span",U,i(t.quantity),1),o(r,{size:"small",onClick:f=>v(t.id,"add")},{default:n(()=>e[2]||(e[2]=[x("+")])),_:2},1032,["onClick"]),o(r,{type:"text",shape:"circle",class:"text-red-500",onClick:f=>k(t.id),loading:t.isRemoving,disabled:t.isRemoving},{icon:n(()=>[o(u(j))]),_:2},1032,["onClick","loading","disabled"])]),s("div",X,[s("p",null,i(t.quantity)+" X "+i(_(t.final_price)),1)]),s("p",Y," Total: "+i(_(t.total_price)),1)])]))),128))]))])]),_:1})]),_:1})])])]),_:1})}}});export{ee as default};
