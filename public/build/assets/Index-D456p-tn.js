import{d as ee,p as g,n as te,c as R,C as j,r as f,a as m,o as u,q as v,e as i,w as c,u as o,m as ae,b as l,f as le,t as s,g as k,P as se,s as P,F as oe,l as ne,M as re}from"./app-C3cv932K.js";import{A as ie}from"./AdminLayout-DlKQG8DF.js";import{V as $,D as de}from"./dataTables.dataTables-C-KR0hb8.js";import{_ as ue}from"./useFlashMessages-b8Ba9dgn.js";import"./ShoppingOutlined-C7pNBmAl.js";import"./LanguageSwitcher.vue_vue_type_script_setup_true_lang-CeFgjxFS.js";import"./FilterOutlined-xajPvmqd.js";const ce={key:0,class:"loading-overlay"},me={class:"bg-white rounded-lg responsive-table p-4 shadow-md"},ve={class:"mb-4 flex items-center justify-between"},pe={class:"text-lg font-semibold mb-4"},_e={class:"mb-4"},ge={class:"block"},fe={key:0,class:"text-red-500"},be={class:"mb-4"},ye={class:"block"},he={key:0,class:"text-red-500"},we={class:"mb-4"},xe={class:"block"},ke={key:0,class:"text-red-500"},Ce={class:"mb-4"},Ie={class:"block"},Le={key:0,class:"text-red-500"},Ue={key:1,class:"mt-2"},Be={class:"text-sm text-gray-600 mb-1"},Ne=["src"],Ae={class:"text-right"},Se={class:"mb-4"},De={class:"block"},Ee={key:0,class:"text-red-500"},Re={class:"mb-4"},je={class:"block"},Pe={key:0,class:"text-red-500"},$e={class:"mb-4"},Me={class:"block"},Te={key:0,class:"text-red-500"},Fe={class:"mb-4"},Oe={class:"block"},Ve={key:0,class:"mb-2"},qe={class:"text-sm text-gray-500 mb-1"},Ye=["src"],ze={class:"text-xs text-gray-500 mt-1"},Ge={key:1,class:"text-red-500"},He={class:"mt-2 text-sm text-gray-500"},Je={key:2,class:"mt-2"},Ke={class:"text-sm text-gray-600 mb-1"},Qe=["src"],We={class:"text-right"},Xe={class:"flex justify-center p-4"},Ze=["src"],et=ee({__name:"Index",props:{categories:{},brands:{}},setup(M){$.use(de);const b=g(!1),T=te(),t=R(()=>{var a;return((a=T.props.translations)==null?void 0:a.dashboard_all_pages)||{}}),F=M,B=R(()=>{var a,e;return((e=(a=F.categories)==null?void 0:a.data)==null?void 0:e.map(p=>({value:p.id,label:p.name})))||[]}),N=(a,e)=>e.label.toLowerCase().includes(a.toLowerCase()),O=a=>a?ne(a).format("DD-MM-YYYY hh:mm A"):"N/A",V=[{title:t.value.sr||"Sr.",data:null,render:(a,e,p,_)=>_.row+1},{title:t.value.image||"Image",data:"image",orderable:!1,render:a=>a?`<img src="/storage/${a}" class="w-12 h-12 object-cover rounded mb-1 cursor-pointer" style="display:inline-block;" />`:'<span class="text-gray-400 mb-1">No Image</span>'},{title:t.value.name||"Name",data:"name"},{title:t.value.description||"Description",data:"description",render:a=>a??"N/A"},{title:t.value.category||"Category",data:"category_name",render:a=>a??"N/A"},{title:t.value.created_at||"Created At",data:"created_at",render:a=>O(a)},{title:t.value.action||"Action",data:null,orderable:!1,render:(a,e,p)=>`
      <button class="edit-btn p-2" data-id="${p.id}" title="${t.value.edit||"Edit"}">
        <i class="fa fa-pencil-square-o text-green-500"></i>
      </button>
      <button class="delete-btn p-2" data-id="${p.id}" title="${t.value.delete||"Delete"}">
        <i class="fa fa-trash text-red-500"></i>
      </button>
    `}],q={paging:!0,searching:!0,ordering:!0,responsive:!0,pageLength:10,createdRow:(a,e)=>{setTimeout(()=>{var p,_,L;(p=a.querySelector(".edit-btn"))==null||p.addEventListener("click",()=>z(e)),(_=a.querySelector(".delete-btn"))==null||_.addEventListener("click",()=>G(e.id)),(L=a.querySelector("img"))==null||L.addEventListener("click",()=>{e.image&&W(e.image)})},0)}},d=j({name:"",description:"",category_id:null,image:null}),r=j({id:null,name:"",description:"",category_id:null,image:null,_method:"PUT"}),w=g(!1),x=g(!1),C=g(!1),A=g(""),y=g(null),h=g(""),I=g(""),Y=()=>{d.reset(),y.value=null,w.value=!0},z=a=>{r.id=a.id,r.name=a.name,r.description=a.description,r.category_id=a.category_id,r.image=null,I.value=a.image,h.value="",x.value=!0},G=a=>{re.confirm({title:t.value.confirm_delete_title||"Are you sure you want to delete",content:t.value.delete_brand_warning||"This action cannot be undone.",okText:t.value.confirm_delete_ok||"Yes, Delete",okType:"danger",cancelText:t.value.confirm_delete_cancel||"Cancel",onOk(){b.value=!0,d.delete(route("admin.brand.delete",{id:a}),{onSuccess:()=>{},onFinish:()=>{b.value=!1}})}})},H=()=>{b.value=!0,d.post(route("admin.brand.store"),{onSuccess:()=>{d.reset(),w.value=!1,y.value&&(URL.revokeObjectURL(y.value),y.value=null)},onFinish:()=>{b.value=!1}})},J=()=>{b.value=!0,r.post(route("admin.brand.update",{id:r.id}),{onSuccess:()=>{x.value=!1,h.value&&(URL.revokeObjectURL(h.value),h.value="")},onFinish:()=>{b.value=!1}})},K=a=>{const e=a.target;e.files&&e.files[0]&&(d.image=e.files[0],y.value=URL.createObjectURL(e.files[0]))},Q=a=>{const e=a.target;e.files&&e.files[0]&&(r.image=e.files[0],h.value=URL.createObjectURL(e.files[0]))},W=a=>{A.value="/storage/"+a,C.value=!0},X=a=>{if(!a)return"";const e=a.split("/");return e[e.length-1]};return(a,e)=>{const p=f("a-spin"),_=f("a-button"),L=f("a-col"),Z=f("a-row"),S=f("a-select"),D=f("a-input"),E=f("a-textarea"),U=f("a-modal");return u(),m(oe,null,[b.value?(u(),m("div",ce,[i(p,{size:"large"})])):v("",!0),i(ie,null,{default:c(()=>[i(o(ae),{title:t.value.brand_title||"Brand List"},null,8,["title"]),i(Z,null,{default:c(()=>[i(L,{xs:24},{default:c(()=>{var n;return[l("div",me,[l("div",ve,[l("h2",pe,s(t.value.brand_title||"Brand List"),1),l("div",null,[i(_,{onClick:Y,type:"default"},{default:c(()=>[k(s(t.value.add_brand||"Add Brand"),1)]),_:1}),i(o(se),{href:a.route("admin.brand-log")},{default:c(()=>[i(_,{type:"default"},{default:c(()=>[k(s(t.value.brand_logs||"Brand Logs"),1)]),_:1})]),_:1},8,["href"])])]),(n=a.brands)!=null&&n.data?(u(),le(o($),{key:0,data:a.brands.data,columns:V,options:q,class:"display"},{default:c(()=>[l("thead",null,[l("tr",null,[l("th",null,s(t.value.sr||"Sr."),1),l("th",null,s(t.value.image||"Image"),1),l("th",null,s(t.value.name||"Name"),1),l("th",null,s(t.value.description||"Description"),1),l("th",null,s(t.value.category||"Category"),1),l("th",null,s(t.value.created_at||"Created At"),1),l("th",null,s(t.value.action||"Action"),1)])]),e[16]||(e[16]=l("tbody",null,null,-1))]),_:1},8,["data"])):v("",!0)])]}),_:1})]),_:1}),i(U,{open:w.value,"onUpdate:open":e[5]||(e[5]=n=>w.value=n),title:t.value.add_brand||"Add Brand",onCancel:e[6]||(e[6]=n=>w.value=!1),footer:null},{default:c(()=>[l("form",{onSubmit:e[4]||(e[4]=P(n=>H(),["prevent"])),enctype:"multipart/form-data"},[l("div",_e,[l("label",ge,s(t.value.category||"Category"),1),i(S,{value:o(d).category_id,"onUpdate:value":e[0]||(e[0]=n=>o(d).category_id=n),"show-search":"",placeholder:t.value.select_category||"Select a Category",class:"mt-2 w-full",options:B.value,"filter-option":N},null,8,["value","placeholder","options"]),o(d).errors.category_id?(u(),m("div",fe,s(o(d).errors.category_id),1)):v("",!0)]),l("div",be,[l("label",ye,s(t.value.name||"Name"),1),i(D,{value:o(d).name,"onUpdate:value":e[1]||(e[1]=n=>o(d).name=n),class:"mt-2 w-full",placeholder:t.value.name_placeholder||"Enter Name"},null,8,["value","placeholder"]),o(d).errors.name?(u(),m("div",he,s(o(d).errors.name),1)):v("",!0)]),l("div",we,[l("label",xe,s(t.value.description||"Description"),1),i(E,{value:o(d).description,"onUpdate:value":e[2]||(e[2]=n=>o(d).description=n),class:"mt-2 w-full",placeholder:t.value.eneter_description||"Enter Description","auto-size":{minRows:2,maxRows:5}},null,8,["value","placeholder"]),o(d).errors.description?(u(),m("div",ke,s(o(d).errors.description),1)):v("",!0)]),l("div",Ce,[l("label",Ie,s(t.value.image||"Image"),1),l("input",{type:"file",onChange:K,accept:"image/*",class:"mt-2 w-full p-2 border rounded"},null,32),o(d).errors.image?(u(),m("div",Le,s(o(d).errors.image),1)):v("",!0),y.value?(u(),m("div",Ue,[l("p",Be,s(t.value.preview||"Preview"),1),l("img",{src:y.value,alt:"Image Preview",class:"w-24 h-24 object-cover rounded border"},null,8,Ne)])):v("",!0)]),l("div",Ae,[i(_,{type:"default",onClick:e[3]||(e[3]=n=>w.value=!1)},{default:c(()=>[k(s(t.value.cancel||"Cancel"),1)]),_:1}),i(_,{type:"primary","html-type":"submit",class:"ml-2"},{default:c(()=>[k(s(t.value.save||"Save"),1)]),_:1})])],32)]),_:1},8,["open","title"]),i(U,{open:x.value,"onUpdate:open":e[12]||(e[12]=n=>x.value=n),title:t.value.update||"Edit Brand",onCancel:e[13]||(e[13]=n=>x.value=!1),footer:null},{default:c(()=>[l("form",{onSubmit:e[11]||(e[11]=P(n=>J(),["prevent"])),enctype:"multipart/form-data"},[l("div",Se,[l("label",De,s(t.value.category||"Category"),1),i(S,{value:o(r).category_id,"onUpdate:value":e[7]||(e[7]=n=>o(r).category_id=n),"show-search":"",placeholder:t.value.select_category||"Select a Category",class:"mt-2 w-full",options:B.value,"filter-option":N},null,8,["value","placeholder","options"]),o(r).errors.category_id?(u(),m("div",Ee,s(o(r).errors.category_id),1)):v("",!0)]),l("div",Re,[l("label",je,s(t.value.name||"Name"),1),i(D,{value:o(r).name,"onUpdate:value":e[8]||(e[8]=n=>o(r).name=n),class:"mt-2 w-full",placeholder:t.value.name_placeholder||"Enter Name"},null,8,["value","placeholder"]),o(r).errors.name?(u(),m("div",Pe,s(o(r).errors.name),1)):v("",!0)]),l("div",$e,[l("label",Me,s(t.value.description||"Description"),1),i(E,{value:o(r).description,"onUpdate:value":e[9]||(e[9]=n=>o(r).description=n),class:"mt-2 w-full",placeholder:t.value.eneter_description||"Enter Description","auto-size":{minRows:2,maxRows:5}},null,8,["value","placeholder"]),o(r).errors.description?(u(),m("div",Te,s(o(r).errors.description),1)):v("",!0)]),l("div",Fe,[l("label",Oe,s(t.value.image||"Image"),1),I.value?(u(),m("div",Ve,[l("p",qe,s(t.value.current_image||"Current Image"),1),l("img",{src:"/storage/"+I.value,alt:"Current Brand Image",class:"w-24 h-24 object-cover rounded border"},null,8,Ye),l("p",ze,s(X(I.value)),1)])):v("",!0),l("input",{type:"file",onChange:Q,accept:"image/*",class:"mt-2 w-full p-2 border rounded"},null,32),o(r).errors.image?(u(),m("div",Ge,s(o(r).errors.image),1)):v("",!0),l("div",He,s(t.value.keep_current_image||"Leave empty to keep the current image"),1),h.value?(u(),m("div",Je,[l("p",Ke,s(t.value.new_image_preview||"New Image Preview"),1),l("img",{src:h.value,alt:"New Image Preview",class:"w-24 h-24 object-cover rounded border"},null,8,Qe)])):v("",!0)]),l("div",We,[i(_,{type:"default",onClick:e[10]||(e[10]=n=>x.value=!1)},{default:c(()=>[k(s(t.value.cancel||"Cancel"),1)]),_:1}),i(_,{type:"primary","html-type":"submit",class:"ml-2"},{default:c(()=>[k(s(t.value.update||"Update"),1)]),_:1})])],32)]),_:1},8,["open","title"]),i(U,{open:C.value,"onUpdate:open":e[14]||(e[14]=n=>C.value=n),title:t.value.preview||"Image Preview",onCancel:e[15]||(e[15]=n=>C.value=!1),footer:null,width:"600px"},{default:c(()=>[l("div",Xe,[l("img",{src:A.value,alt:"Full Size Image",class:"max-w-full max-h-[500px] object-cover"},null,8,Ze)])]),_:1},8,["open","title"])]),_:1})],64)}}}),it=ue(et,[["__scopeId","data-v-c7b70c27"]]);export{it as default};
