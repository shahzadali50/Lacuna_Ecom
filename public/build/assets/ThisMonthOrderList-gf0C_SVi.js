import{d as z,p as y,n as Q,c as G,C as H,r as b,f as P,o as v,w as r,e as d,u as S,m as J,b as e,q as C,t,s as K,a as g,F as L,v as A,g as _,i as W,l as X}from"./app-C9NPN8YL.js";import{A as Z}from"./AdminLayout-DLyqpZI_.js";import{V as M,D as ee}from"./dataTables.dataTables-DzMoOcqn.js";import{O as te}from"./OrderStatusBtn-BV4Xh6MT.js";import"./ShoppingOutlined-Bm8hxjj4.js";import"./useFlashMessages-DxL5MwKF.js";import"./LanguageSwitcher.vue_vue_type_script_setup_true_lang-cHfJrG5p.js";import"./FilterOutlined-de12o04R.js";const se={class:"bg-white rounded-lg responsive-table p-4 shadow-md"},ae={class:"mb-4 flex items-center justify-between"},le={class:"text-lg font-semibold mb-4"},oe={class:"mb-4"},ne={class:"text-lg font-semibold mb-3"},re={class:"mb-4"},de={class:"block"},ue={key:0,class:"text-red-500"},ie={class:"text-right"},ce={class:"mb-4"},_e={class:"text-lg font-semibold mb-3"},pe={class:"mb-2"},ve={class:"font-semibold"},me={class:"mb-2"},be={class:"font-semibold"},he={class:"mb-2"},fe={class:"font-semibold"},ye={class:"mb-2"},ge={class:"font-semibold"},we={class:"mb-2"},xe={class:"font-semibold"},Se={class:"mb-2"},ke={class:"font-semibold"},Ce={class:"mb-2"},Te={class:"font-semibold"},De={class:"mb-2"},Oe={class:"font-semibold"},Ne={key:0,class:"mt-2"},Pe={class:"mb-2"},Le={class:"font-semibold"},Ae={class:"mb-2 overflow-x-auto"},Me={class:"table-auto w-full min-w-[600px]"},Ve={class:"text-left"},$e={class:"py-2"},qe={class:"py-2"},Be=["src","alt"],Ue={class:"py-2"},Ye={class:"py-2"},je={class:"py-2"},Ee={class:"py-2"},Fe={class:"my-3"},Ie={class:"mb-2"},Re={class:"font-bold text-primary"},ze={class:"mb-2"},Qe={class:"font-bold text-primary"},Ge={class:"mb-2"},He={class:"font-bold text-primary"},at=z({__name:"ThisMonthOrderList",props:{orders:Object},setup(T){M.use(ee);const k=y(!1),V=Q(),s=G(()=>{var a;return((a=V.props.translations)==null?void 0:a.dashboard_all_pages)||{}}),$=a=>a?X(a).format("DD-MM-YYYY hh:mm A"):"N/A",w=y(!1),h=y(!1),i=y(null),x=y(""),q=[{value:"pending",label:"Pending",icon:"fa fa-clock-o"},{value:"processing",label:"Processing",icon:"fa-cog"},{value:"dispatched",label:"Dispatched",icon:"fa-truck"},{value:"delivered",label:"Delivered",icon:"fa-check-circle"},{value:"cancelled",label:"Cancelled",icon:"fa-times-circle"},{value:"returned",label:"Returned",icon:"fa-undo"},{value:"refunded",label:"Refunded",icon:"fa fa-retweet"}],B=a=>{i.value=a,w.value=!0},U=[{title:s.value.sr||"Sr.",data:null,render:(a,o,c,u)=>u.row+1},{title:s.value.order_id||"Order ID",data:"order_id",render:a=>`<span class="badge bg-secondary">${a}</span>`},{title:s.value.status||"Status",data:"status",render:(a,o,c)=>{let u="btn-secondary";switch(a.toLowerCase()){case"pending":u="btn-warning";break;case"processing":u="btn-info";break;case"dispatched":u="btn-primary";break;case"delivered":u="btn-success";break;case"cancelled":u="btn-danger";break;case"returned":u="btn-secondary";break;case"refunded":u="btn-dark";break}return`
                <button class="btn-order-status ${u} p-2" data-id="${c.id}">
                    ${a}
                </button>
            `}},{title:s.value.customer_name||"Customer Name",data:"name"},{title:s.value.phone_number||"Phone No",data:"phone_number"},{title:s.value.subtotal||"SubTotal",data:"subtotal_price",render:a=>Math.floor(a)},{title:s.value.total||"Total",data:"total_price",render:a=>Math.floor(a)},{title:s.value.created_at||"Created At",data:"created_at",render:a=>$(a)},{title:s.value.action||"Action",data:null,orderable:!1,render:(a,o,c)=>`
            <button class="view-btn p-2" data-id="${c.id}" title="${s.value.view||"View"}">
                 <i class="fa fa-cart-plus text-2xl" aria-hidden="true"></i>
            </button>
        `}],Y={paging:!0,searching:!0,ordering:!0,responsive:!0,pageLength:10,createdRow:(a,o)=>{setTimeout(()=>{var c,u;(c=a.querySelector(".view-btn"))==null||c.addEventListener("click",()=>B(o)),(u=a.querySelector(".btn-order-status"))==null||u.addEventListener("click",()=>j(o))},0)}},m=H({id:null,status:"",_method:"PUT"}),j=a=>{m.id=a.id,i.value=a,x.value=a.status,h.value=!0},E=()=>{k.value=!0,m.status=x.value,m.post(route("admin.order.status.update",{id:m.id}),{preserveScroll:!0,onSuccess:()=>{h.value=!1},onFinish:()=>{k.value=!1}})};return(a,o)=>{const c=b("a-col"),u=b("a-row"),F=b("a-select-option"),I=b("a-select"),R=b("a-button"),D=b("a-modal");return v(),P(Z,null,{default:r(()=>[d(S(J),{title:s.value.order_list||"Order List"},null,8,["title"]),d(u,null,{default:r(()=>[d(c,{span:24,class:"mb-2"},{default:r(()=>[d(te)]),_:1})]),_:1}),d(u,null,{default:r(()=>[d(c,{xs:24},{default:r(()=>{var n;return[e("div",se,[e("div",ae,[e("h2",le,t(s.value.order_list||"Order List"),1)]),(n=T.orders)!=null&&n.data?(v(),P(S(M),{key:0,data:T.orders.data,columns:U,options:Y,class:"display"},{default:r(()=>[e("thead",null,[e("tr",null,[e("th",null,t(s.value.sr||"Sr."),1),e("th",null,t(s.value.order_id||"Order ID"),1),e("th",null,t(s.value.status||"Status"),1),e("th",null,t(s.value.customer_name||"Customer Name"),1),e("th",null,t(s.value.phone||"Phone No"),1),e("th",null,t(s.value.subtotal||"SubTotal"),1),e("th",null,t(s.value.total||"Total"),1),e("th",null,t(s.value.created_at||"Created At"),1),e("th",null,t(s.value.action||"Action"),1)])]),o[5]||(o[5]=e("tbody",null,null,-1))]),_:1},8,["data"])):C("",!0)])]}),_:1})]),_:1}),d(D,{width:"700px",open:h.value,"onUpdate:open":o[1]||(o[1]=n=>h.value=n),title:"Change Order Status",onCancel:o[2]||(o[2]=n=>h.value=!1),footer:null},{default:r(()=>[e("form",{onSubmit:K(E,["prevent"])},[d(u,null,{default:r(()=>[d(c,{xs:24},{default:r(()=>{var n;return[e("div",oe,[e("h3",ne,"Order #"+t((n=i.value)==null?void 0:n.order_id),1),e("div",re,[e("label",de,t(s.value.status||"Status"),1),d(I,{value:x.value,"onUpdate:value":o[0]||(o[0]=l=>x.value=l),style:{width:"200px"}},{default:r(()=>[(v(),g(L,null,A(q,l=>d(F,{key:l.value,value:l.value},{default:r(()=>[e("i",{class:W(["fa",l.icon,"mr-2"])},null,2),_(" "+t(l.label),1)]),_:2},1032,["value"])),64))]),_:1},8,["value"]),S(m).errors.status?(v(),g("div",ue,t(S(m).errors.status),1)):C("",!0)]),e("div",ie,[d(R,{type:"primary","html-type":"submit",loading:k.value,class:"ml-2"},{default:r(()=>[_(t(s.value.update_status||"Update Status"),1)]),_:1},8,["loading"])])])]}),_:1})]),_:1})],32)]),_:1},8,["open"]),d(D,{width:"700px",open:w.value,"onUpdate:open":o[3]||(o[3]=n=>w.value=n),title:s.value.order_preview||"Order Preview",onCancel:o[4]||(o[4]=n=>w.value=!1),footer:null},{default:r(()=>[d(u,null,{default:r(()=>[d(c,{xs:24},{default:r(()=>{var n;return[e("div",ce,[e("h3",_e,t(s.value.shiping_details||"Shipping Details"),1),d(u,{gutter:16},{default:r(()=>[d(c,{xs:24,sm:12},{default:r(()=>{var l,p,f;return[e("p",pe,[e("span",ve,t(s.value.name||"Name")+":",1),_(" "+t((l=i.value)==null?void 0:l.name),1)]),e("p",me,[e("span",be,t(s.value.phone_number||"Phone")+":",1),_(" "+t((p=i.value)==null?void 0:p.phone_number),1)]),e("p",he,[e("span",fe,t(s.value.email||"Email")+":",1),_(" "+t((f=i.value)==null?void 0:f.email),1)])]}),_:1}),d(c,{xs:24,sm:12},{default:r(()=>{var l,p,f,O,N;return[e("p",ye,[e("span",ge,t(s.value.address||"Address")+":",1),_(" "+t((l=i.value)==null?void 0:l.address),1)]),e("p",we,[e("span",xe,t(s.value.city||"City")+":",1),_(" "+t((p=i.value)==null?void 0:p.city),1)]),e("p",Se,[e("span",ke,t(s.value.state||"State")+":",1),_(" "+t((f=i.value)==null?void 0:f.state),1)]),e("p",Ce,[e("span",Te,t(s.value.postal_code||"Postal Code")+":",1),_(" "+t((O=i.value)==null?void 0:O.postal_code),1)]),e("p",De,[e("span",Oe,t(s.value.country||"Country")+":",1),_(" "+t((N=i.value)==null?void 0:N.country),1)])]}),_:1})]),_:1}),(n=i.value)!=null&&n.order_notes?(v(),g("div",Ne,[e("p",Pe,[e("span",Le,t(s.value.order_notes||"Order Notes")+":",1),_(" "+t(i.value.order_notes),1)])])):C("",!0)])]}),_:1}),d(c,{xs:24},{default:r(()=>{var n;return[e("div",Ae,[o[6]||(o[6]=e("div",{class:"border-gray-500 border my-4"},null,-1)),e("table",Me,[e("thead",null,[e("tr",Ve,[e("th",null,t(s.value.sr||"Sr"),1),e("th",null,t(s.value.image||"Image"),1),e("th",null,t(s.value.product||"Product"),1),e("th",null,t(s.value.price||"Price"),1),e("th",null,t(s.value.quantity||"QTY"),1),e("th",null,t(s.value.total||"Total"),1)])]),e("tbody",null,[(v(!0),g(L,null,A((n=i.value)==null?void 0:n.sale_products,(l,p)=>(v(),g("tr",{key:l.id,class:"border-b py-3"},[e("td",$e,t(p+1),1),e("td",qe,[e("img",{src:"/storage/"+l.product.thumnail_img,alt:l.product.name,class:"w-16 h-16 object-cover rounded"},null,8,Be)]),e("td",Ue,t(l.product.name),1),e("td",Ye,t(l.sale_price),1),e("td",je,t(l.qty),1),e("td",Ee,t(l.total_price),1)]))),128))])])])]}),_:1}),d(c,{xs:24},{default:r(()=>{var n,l;return[o[7]||(o[7]=e("div",{class:"border-gray-500 border my-4"},null,-1)),e("div",Fe,[e("h4",Ie,[_(t(s.value.subtotal||"Subtotal")+": ",1),e("span",Re,t((n=i.value)==null?void 0:n.subtotal_price),1)]),e("h4",ze,[_(t(s.value.shipping_charge||"Shipping Charges")+": ",1),e("span",Qe,t(s.value.free_delivery||"Free Delivery"),1)]),e("h4",Ge,[_(t(s.value.total_price||"Total Price")+": ",1),e("span",He,t((l=i.value)==null?void 0:l.total_price),1)])])]}),_:1})]),_:1})]),_:1},8,["open","title"])]),_:1})}}});export{at as default};
